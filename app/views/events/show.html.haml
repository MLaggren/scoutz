.row-fluid
  .span12
    .page-header
      .pull-right
        - if @event.users.where(id: current_user).count > 0
          = link_to(edit_event_path(@event), class: 'btn') do
            %i.icon-edit
            change

        = link_to(new_event_path, class: "btn btn-success") do
          %i.icon-plus
          new event

      %h2 #{@event.name}


.row-fluid
  .span8
    = render partial: 'layouts/flash', locals: {flash: flash, ar_object: @event_signup}
    %em.xxlarge= @event.unit.name
    .text-xlarge
      %table.table
        %tr
          %td
            %strong Kind
          %td
            = @event.kind
            = " - #{event_kind_sub_units(@event)}" if @event.sub_unit_kind?

        %tr
          %td
            %strong Times
          %td #{@event.start_at.to_s(:short_ampm)} - #{@event.end_at.to_s(:short_ampm)}

        %tr
          %td
            %strong Organizer
          %td
            - @event.users.each do |user|
              = link_to user.full_name, user_path(user.id)

        %tr
          %td
            %strong RSVP
          %td #{@event.signup_required ? "required, by #{@event.signup_deadline.to_s(:short_ampm)}" : 'not required'}

        %tr
          %td
            %strong Reminders?
          %td #{@event.send_reminders ? 'Yes' : 'No'}

          %tr
            %td
              %strong Attire
            %td= @event.attire

        %tr
          %td
            %strong Location
          %td
            %address= location_show(@event)
            - if @event.location_map_url.blank?
              = gmaps(map_options: {zoom: 13, auto_zoom: false}, markers: {data: @event.to_gmaps4rails})
            - else
              .iframe-rwd
                %iframe{src: location_map_url_iframe(@event).html_safe, frameborder: "0", width: "300", height: "300", scrolling: "no", marginheight: "0", marginwidth: "0"}

          %tr
            %td &nbsp;
            %td= @event.message.html_safe

          %tr
            %td
              %strong Roster
            %td
              %table.table-condensed
                = render partial: 'event_signups/event_roster', collection: @event_rosters
                - #@event.event_signups.includes(:scout).each do |signup|


  .span4
    - if @event.signup_required && @event.after_signup_deadline?
      #event-signups-list
        = render partial: 'event_signups/event_signup', collection: @event_signups, locals: {event: @event}

